# CarbonArc Seller MCP Server

This MCP Server has four tools -

1. create-account-and-login: Having an account with CarbonArc is mandatory to access its tools. This tool creates account for current buyer agent using the KYA token generated by Skyfire and an agent generated new secure regex password that must contain minimum of 8,  maximum of 12 alphanumeric characters including atleast 1 uppercase character, 1 numeric character and 1 special character. On successful account creation, access token is returned.
2. search-dataset: Access token is mandatory to access this tool. This tool returns the list of datasets matching the input prompt. Each dataset has dataset_id which could be further used in other tools.
3. get-pricing: Access token is mandatory to access this tool. This tool gets pricing for the dataset_id provided.
4. download-dataset: Access token is mandatory to access this tool. Payment should. already be executed and JWT PAY token generated by Skyfire is required. This tool returns the dataset url for the selected dataset_id.

## Getting Started

- Set up CloudFlare R2 bucket to store dataset file:
1. Login to Cloudflare dashboard 
2. Navigate to R2, and select "Create Bucket". 
3. Name your bucket and confirm creation. 

- Set up an Ory account: 
For creating an account and logging in, Ory is the default IAM being used in this demo.
1. Visit the [Ory Console](https://console.ory.sh)
2. Create a new workspace
3. Create a project in the new workspace
4. Use the Project ID, Project Slug, API endpoints etc details from Project Settings tab in env variables.


## Installation

1.  Clone the repository:
    ```bash
    git clone <repository-url>
    cd carbonarc-seller-mcp-server
    ```
2.  Install dependencies:
    ```bash
    npm install
    ```
3.  Set up environment variables:
    Create a `.env` file in the root directory. You can copy `.env.example` if one exists, or add the necessary variables manually.

    ```
    # .env
    ACCESS_KEY_ID=your_R2_access_key_id
    ACCOUNT_ID=your_R2_access_id
    SECRET_ACCESS_KEY=your_R2_secret_access_key
    BUCKET_NAME=your_R2_bucket_name
    CARBONARC_SELLER_ID=your_seller_id
    CARBONARC_SELLER_SERVICE_ID=your_seller_service_id
    JWKS_URL=https://api-qa.skyfire.xyz/.well-known/jwks.json
    ORY_API_KEY=your_ory_api_key
    ORY_PASSWORD=your_ory_password
    ORY_PROJECT_ID=your_ory_project_id
    SKYFIRE_API_KEY=your_carbonarc_seller_api_key
    JWT_ISSUER=https://app-qa.skyfire.xyz/
    SKYFIRE_API_BASE_URL=https://api-qa.skyfire.xyz
    R2_BASE_URL=your_R2_base_url
    ```

## Run the development server:

```bash
npm run dev
```

The MCP server will run on [http://localhost:8789/sse](http://localhost:8789/sse).
